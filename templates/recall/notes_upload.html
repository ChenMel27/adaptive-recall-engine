{% extends "recall/base.html" %}
{% block title %}Upload Notes â€“ {{ attempt.topic.name }}{% endblock %}

{% block content %}
<div class="session-header">
    <div class="session-info">
        <h1>ğŸ“„ Upload Your Notes</h1>
        <p class="topic-badge">[{{ attempt.topic.standard }}] {{ attempt.topic.name }}</p>
        <p class="session-meta">Hey {{ attempt.student_name }}! Let's turn your notes into a quiz ğŸ¯</p>
    </div>
</div>

<div class="interaction-card">
    <h2>Drop your class notes for: <em>{{ attempt.topic.name }}</em></h2>
    <p class="prompt-hint">ğŸ“ Upload a PDF of your class notes and we'll whip up a personalized quiz just for you!</p>
    <p class="prompt-hint"><strong>Heads up:</strong> Make sure it's a text-based PDF (not a photo or scan).</p>

    <form method="post" action="{% url 'recall:notes_upload_submit' attempt_id=attempt.pk %}" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="file-upload-area">
            <label for="notes_file" class="file-upload-label">
                <span class="file-upload-icon">ğŸ“‚</span>
                <span class="file-upload-text">Click to pick a PDF file</span>
                <input type="file" id="notes_file" name="notes_file" accept=".pdf" required class="file-upload-input">
            </label>
        </div>

        {% if form.errors %}
        <div class="form-errors">
            {% for field, errors in form.errors.items %}
            {% for error in errors %}
            <p class="error-text">{{ error }}</p>
            {% endfor %}
            {% endfor %}
        </div>
        {% endif %}

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Upload & Generate My Quiz ğŸš€</button>
        </div>
    </form>
</div>

<div class="info-card">
    <h3>âœ¨ What happens next?</h3>
    <ol>
        <li>ğŸ” We'll read through your notes and find the key biology concepts.</li>
        <li>ğŸ“ You'll get a short quiz focused on any gaps we spot in your notes.</li>
        <li>ğŸ’¬ Each question comes with instant feedback â€” no grades, just learning!</li>
    </ol>
</div>
{% endblock %}
