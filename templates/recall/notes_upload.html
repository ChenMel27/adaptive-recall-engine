{% extends "recall/base.html" %}
{% block title %}Upload Notes â€“ {{ attempt.topic.name }}{% endblock %}

{% block content %}
<div class="session-header">
    <div class="session-info">
        <h1>ðŸ“„ Upload Your Notes</h1>
        <p class="topic-badge">[{{ attempt.topic.standard }}] {{ attempt.topic.name }}</p>
        <p class="session-meta">Hi {{ attempt.student_name }}!</p>
    </div>
</div>

<div class="interaction-card">
    <h2>Upload your class notes for: <em>{{ attempt.topic.name }}</em></h2>
    <p class="prompt-hint">Upload a PDF of your class notes. We'll create a personalized quiz based on what's in your notes!</p>
    <p class="prompt-hint"><strong>Note:</strong> Please upload a text-based PDF (not a scanned image).</p>

    <form method="post" action="{% url 'recall:notes_upload_submit' attempt_id=attempt.pk %}" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="file-upload-area">
            <label for="notes_file" class="file-upload-label">
                <span class="file-upload-icon">ðŸ“Ž</span>
                <span class="file-upload-text">Choose a PDF file</span>
                <input type="file" id="notes_file" name="notes_file" accept=".pdf" required class="file-upload-input">
            </label>
        </div>

        {% if form.errors %}
        <div class="form-errors">
            {% for field, errors in form.errors.items %}
            {% for error in errors %}
            <p class="error-text">{{ error }}</p>
            {% endfor %}
            {% endfor %}
        </div>
        {% endif %}

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Upload & Generate Quiz â†’</button>
        </div>
    </form>
</div>

<div class="info-card">
    <h3>ðŸ’¡ What happens next?</h3>
    <ol>
        <li>We'll read through your notes and identify the key concepts.</li>
        <li>You'll get a short quiz focused on any gaps in your notes.</li>
        <li>Each question includes immediate feedback â€” no grades!</li>
    </ol>
</div>
{% endblock %}
